import pygame
import random
from sys import exit
from player import Player
from level import Level
from camera import Camera
from world import World

pygame.init()

screen = pygame.display.set_mode((1024, 512))

pygame.display.set_caption("Very Short Moose Game")
pygame.display.set_icon(pygame.image.load("Assets/Player Idle.png").convert_alpha())

images_to_import = ['Assets/Player Idle.png',
                    'Assets/Player Jump.png',
                    'Assets/Player Fall.png',
                    'Assets/Player Run 1.png',
                    'Assets/Player Run 2.png',
                    'Assets/Player Run 3.png',
                    'Assets/Player Run 4.png',
                    'Assets/Player Run 5.png',
                    'Assets/Player Run 6.png',
                    'Assets/Dirt.png',
                    'Assets/Grass.png',
                    'Assets/Spikes.png',
                    'Assets/Flag.png']
images = []

for image in images_to_import:

        new_image = pygame.image.load(image).convert_alpha()
        new_image = pygame.transform.scale(new_image, (64,64))
        images.append(new_image)

levels = [
    [
        [0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,2,2,2,2,2,0,0,0,0,0,3,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [2,2,2,2,2,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2],
        [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ],
    [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,4,0],
        [0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,2,2,2],
        [0,0,0,0,0,0,3,0,1,0,0,0,0,0,0,0,0,1,1,1],
        [0,0,0,0,2,2,2,0,0,0,0,2,3,3,3,2,0,0,1,0],
        [0,5,0,0,1,1,1,0,0,0,0,1,1,1,1,1,0,0,0,0],
        [2,2,2,0,0,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0],
        [1,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0],
        [0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0]
    ],
    [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0],
        [0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,2,2,2,0,0,0,0,3,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,2,2],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0],
        [0,5,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0],
        [2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
    ],
    [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,5,0,3,0,0,3,0,0,3,0,0,3,0,0,3,0,4,0,3],
        [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],
        [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ],
    [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,3,0,0,2,2,2,2,0,0,0],
        [0,0,0,0,0,3,0,0,0,2,2,2,0,1,1,1,1,0,0,0],
        [0,0,0,0,2,2,2,0,0,1,1,1,0,1,1,1,1,0,0,0],
        [0,5,0,0,1,1,1,0,0,0,1,0,0,0,1,1,0,0,0,0],
        [2,2,2,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
    ],
    [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,2,3,2,2,3,0,0,0,3,0,0,3,0,0,4],
        [0,5,0,0,3,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2],
        [2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ],
    [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,4,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0],
        [0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
    ],
    [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0],
        [0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0],
        [2,2,2,2,2,2,3,3,3,3,2,2,3,3,3,3,3,2,2,2],
        [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ],
    [
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,9,0,4],
        [0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,2,2,2,2],
        [0,5,0,0,0,0,2,2,2,2,3,3,3,2,2,2,1,1,1,1],
        [2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
        [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ],
    [
        [0,0,0,0,0,0,0,2,0,2,0,0,2,2,0,0,2,0,0,2],
        [0,0,0,0,0,2,0,1,0,1,0,2,0,0,2,0,1,0,0,1],
        [0,0,0,0,2,1,0,1,0,1,0,1,0,0,1,0,1,0,0,1],
        [0,0,0,2,1,1,0,0,2,0,0,1,0,0,1,0,1,0,0,1],
        [2,0,0,0,0,0,0,0,1,0,0,0,2,2,0,0,0,2,2,0],
        [1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
        [1,1,2,0,0,0,0,0,2,0,0,0,2,0,2,0,2,2,0,2],
        [0,0,0,0,0,2,0,0,1,0,2,0,1,0,1,0,1,0,2,1],
        [0,0,0,0,2,1,0,0,1,0,1,0,1,0,1,0,1,0,0,1],
        [0,5,0,2,1,1,0,0,0,2,0,2,0,0,1,0,1,0,0,1],
        [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2]
    ]
]

world_1 = World(levels, 64, [images[9],images[10],images[11],images[12]])
        
player = Player(world_1)

camera = Camera()

while True:

        for event in pygame.event.get():
                
                if event.type == pygame.QUIT:
                        
                        pygame.quit()
                        exit()
                        
                player.detect_move(event)

        world_1.update_player_level(player)
        player.move()
        player.collide(world_1)

        screen.fill((150,150,150))
        player.draw(screen, camera, [[images[0]],[images[3],images[4],images[5],images[6],images[7],images[8]],[images[1]],[images[2]]])
        world_1.draw(screen, camera)

        camera.follow_player(player)
        
        pygame.display.update()
        
        pygame.time.Clock().tick(60)
